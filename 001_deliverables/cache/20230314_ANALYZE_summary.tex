% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[
]{article}
\usepackage{amsmath,amssymb}
\usepackage{lmodern}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math}
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
  \setmainfont[]{Bahnschrift:style=Bold}
  \setmonofont[]{Bahnschrift:style=Condensed}
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{xcolor}
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
% Set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{-\maxdimen} % remove section numbering
\ifLuaTeX
  \usepackage{selnolig}  % disable illegal ligatures
\fi
\IfFileExists{bookmark.sty}{\usepackage{bookmark}}{\usepackage{hyperref}}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same} % disable monospaced font for URLs
\hypersetup{
  pdftitle={Analysis of Cyclistic User Data},
  pdfauthor={Michael-Philipp Stiebing},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{Analysis of Cyclistic User Data}
\author{Michael-Philipp Stiebing}
\date{2023-03-21}

\begin{document}
\maketitle

\fontsize{9}{11}
\selectfont

\fontsize{10}{12}
\selectfont

\hypertarget{starting-with-processed-dataframe-all_trips_v5}{%
\section{Starting with processed dataframe
all\_trips\_v5}\label{starting-with-processed-dataframe-all_trips_v5}}

\begin{itemize}
\tightlist
\item
  Conduct descriptive analysis as per script
\end{itemize}

\fontsize{9}{11}
\selectfont

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Set up two color palette that are compatible with all kinds of color vision, }
\CommentTok{\# from http://www.cookbook{-}r.com/Graphs/Colors\_(ggplot2)/}

\NormalTok{cbPaletteMin }\OtherTok{\textless{}{-}} \FunctionTok{c}\NormalTok{(}\StringTok{"\#E69F00"}\NormalTok{, }\StringTok{"\#0072B2"}\NormalTok{)}

\CommentTok{\# 2700s = 45 min 10800s = 3 hours}

\FunctionTok{table}\NormalTok{(all\_trips\_v5}\SpecialCharTok{$}\NormalTok{member\_casual)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## 
##  casual  member 
## 2553025 3695371
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(all\_trips\_v5}\SpecialCharTok{$}\NormalTok{ride\_length)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##      61     366     634     999    1129   86391
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{summary}\NormalTok{(all\_trips\_v5}\SpecialCharTok{$}\NormalTok{geodist)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##     0.0   919.4  1608.6  2173.3  2820.9 42319.5
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Compare members and casual users}
\FunctionTok{aggregate}\NormalTok{(all\_trips\_v5}\SpecialCharTok{$}\NormalTok{ride\_length }\SpecialCharTok{\textasciitilde{}}\NormalTok{ all\_trips\_v5}\SpecialCharTok{$}\NormalTok{member\_casual, }\AttributeTok{FUN =}\NormalTok{ mean)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   all_trips_v5$member_casual all_trips_v5$ride_length
## 1                     casual                1346.5537
## 2                     member                 758.8174
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{aggregate}\NormalTok{(all\_trips\_v5}\SpecialCharTok{$}\NormalTok{ride\_length }\SpecialCharTok{\textasciitilde{}}\NormalTok{ all\_trips\_v5}\SpecialCharTok{$}\NormalTok{member\_casual, }\AttributeTok{FUN =}\NormalTok{ median)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##   all_trips_v5$member_casual all_trips_v5$ride_length
## 1                     casual                      808
## 2                     member                      540
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# casual users seem to take longer rides}


\FunctionTok{nrow}\NormalTok{(all\_trips\_v5[all\_trips\_v5}\SpecialCharTok{$}\NormalTok{member\_casual }\SpecialCharTok{==} \StringTok{"casual"} \SpecialCharTok{\&}\NormalTok{ all\_trips\_v5}\SpecialCharTok{$}\NormalTok{ride\_length }\SpecialCharTok{\textgreater{}} \DecValTok{2700}\NormalTok{,]) }\SpecialCharTok{/}
  \FunctionTok{nrow}\NormalTok{(all\_trips\_v5[all\_trips\_v5}\SpecialCharTok{$}\NormalTok{member\_casual }\SpecialCharTok{==} \StringTok{"casual"}\NormalTok{,])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.1008094
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{nrow}\NormalTok{(all\_trips\_v5[all\_trips\_v5}\SpecialCharTok{$}\NormalTok{member\_casual }\SpecialCharTok{==} \StringTok{"member"} \SpecialCharTok{\&}\NormalTok{ all\_trips\_v5}\SpecialCharTok{$}\NormalTok{ride\_length }\SpecialCharTok{\textgreater{}} \DecValTok{2700}\NormalTok{,]) }\SpecialCharTok{/} 
  \FunctionTok{nrow}\NormalTok{(all\_trips\_v5[all\_trips\_v5}\SpecialCharTok{$}\NormalTok{member\_casual }\SpecialCharTok{==} \StringTok{"member"}\NormalTok{,])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.01653609
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# 10 percent of casual users take rides that are longer than 45 minutes, whereas only 1.7 percent of members do}

\FunctionTok{nrow}\NormalTok{(}\FunctionTok{filter}\NormalTok{(all\_trips\_v5,geodist }\SpecialCharTok{\textless{}=} \DecValTok{10}\NormalTok{)) }\SpecialCharTok{/} \FunctionTok{nrow}\NormalTok{(all\_trips\_v5)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.05118626
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{nrow}\NormalTok{(all\_trips\_v5[all\_trips\_v5}\SpecialCharTok{$}\NormalTok{member\_casual }\SpecialCharTok{==} \StringTok{"casual"} \SpecialCharTok{\&}\NormalTok{ all\_trips\_v5}\SpecialCharTok{$}\NormalTok{geodist }\SpecialCharTok{\textless{}=} \DecValTok{10}\NormalTok{,]) }\SpecialCharTok{/} 
  \FunctionTok{nrow}\NormalTok{(all\_trips\_v5[all\_trips\_v5}\SpecialCharTok{$}\NormalTok{member\_casual }\SpecialCharTok{==} \StringTok{"casual"}\NormalTok{,])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.07263854
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\FunctionTok{nrow}\NormalTok{(all\_trips\_v5[all\_trips\_v5}\SpecialCharTok{$}\NormalTok{member\_casual }\SpecialCharTok{==} \StringTok{"member"} \SpecialCharTok{\&}\NormalTok{ all\_trips\_v5}\SpecialCharTok{$}\NormalTok{geodist }\SpecialCharTok{\textless{}=} \DecValTok{10}\NormalTok{,]) }\SpecialCharTok{/} 
  \FunctionTok{nrow}\NormalTok{(all\_trips\_v5[all\_trips\_v5}\SpecialCharTok{$}\NormalTok{member\_casual }\SpecialCharTok{==} \StringTok{"member"}\NormalTok{,])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 0.0363655
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# 7.3 percent of casual users \textquotesingle{}take round trips\textquotesingle{}, whereas only 3.6 percent of members do}

\CommentTok{\# Notice that the days of the week are out of order. Let\textquotesingle{}s fix that.}
\NormalTok{all\_trips\_v5}\SpecialCharTok{$}\NormalTok{day\_of\_week }\OtherTok{\textless{}{-}} \FunctionTok{ordered}\NormalTok{(all\_trips\_v5}\SpecialCharTok{$}\NormalTok{day\_of\_week, }\AttributeTok{levels=}\FunctionTok{c}\NormalTok{(}\StringTok{"Sunday"}\NormalTok{, }\StringTok{"Monday"}\NormalTok{, }\StringTok{"Tuesday"}\NormalTok{, }\StringTok{"Wednesday"}\NormalTok{,}
                                                                       \StringTok{"Thursday"}\NormalTok{, }\StringTok{"Friday"}\NormalTok{, }\StringTok{"Saturday"}\NormalTok{))}

\CommentTok{\# Now, let\textquotesingle{}s run the average ride time by each day for members vs casual users}
\FunctionTok{aggregate}\NormalTok{(all\_trips\_v5}\SpecialCharTok{$}\NormalTok{ride\_length }\SpecialCharTok{\textasciitilde{}}\NormalTok{ all\_trips\_v5}\SpecialCharTok{$}\NormalTok{member\_casual }\SpecialCharTok{+}\NormalTok{ all\_trips\_v5}\SpecialCharTok{$}\NormalTok{day\_of\_week, }\AttributeTok{FUN =}\NormalTok{ mean)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##    all_trips_v5$member_casual all_trips_v5$day_of_week all_trips_v5$ride_length
## 1                      casual                   Sunday                1545.3593
## 2                      member                   Sunday                 841.4815
## 3                      casual                   Monday                1366.7836
## 4                      member                   Monday                 731.2731
## 5                      casual                  Tuesday                1205.8529
## 6                      member                  Tuesday                 721.9373
## 7                      casual                Wednesday                1161.0311
## 8                      member                Wednesday                 721.9887
## 9                      casual                 Thursday                1185.8862
## 10                     member                 Thursday                 728.3687
## 11                     casual                   Friday                1261.1652
## 12                     member                   Friday                 745.0343
## 13                     casual                 Saturday                1503.8461
## 14                     member                 Saturday                 848.3125
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# analyze ridership data by type and weekday}
\NormalTok{all\_trips\_v5 }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{weekday =} \FunctionTok{wday}\NormalTok{(started\_at, }\AttributeTok{label =} \ConstantTok{TRUE}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%}    \CommentTok{\# creates weekday field using wday()}
  \FunctionTok{group\_by}\NormalTok{(member\_casual, weekday) }\SpecialCharTok{\%\textgreater{}\%}                    \CommentTok{\# groups by usertype and weekday}
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{number\_of\_rides =} \FunctionTok{n}\NormalTok{()                         }\CommentTok{\# calculates the number of rides and average duration}
\NormalTok{            ,}\AttributeTok{average\_duration =} \FunctionTok{mean}\NormalTok{(ride\_length)) }\SpecialCharTok{\%\textgreater{}\%}    \CommentTok{\# calculates the average duration}
  \FunctionTok{arrange}\NormalTok{(member\_casual, weekday)                         }\CommentTok{\# sorts}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## `summarise()` has grouped output by 'member_casual'. You can override using the
## `.groups` argument.
\end{verbatim}

\begin{verbatim}
## # A tibble: 14 x 4
## # Groups:   member_casual [2]
##    member_casual weekday number_of_rides average_duration
##    <chr>         <ord>             <int>            <dbl>
##  1 casual        Sun              439601            1545.
##  2 casual        Mon              300340            1367.
##  3 casual        Tue              285059            1206.
##  4 casual        Wed              295860            1161.
##  5 casual        Thu              322175            1186.
##  6 casual        Fri              370221            1261.
##  7 casual        Sat              539769            1504.
##  8 member        Sun              433825             841.
##  9 member        Mon              520207             731.
## 10 member        Tue              569216             722.
## 11 member        Wed              575028             722.
## 12 member        Thu              567557             728.
## 13 member        Fri              524988             745.
## 14 member        Sat              504550             848.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Let\textquotesingle{}s visualize the number of rides by rider type}
\NormalTok{all\_trips\_v5 }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{weekday =} \FunctionTok{wday}\NormalTok{(started\_at, }\AttributeTok{label =} \ConstantTok{TRUE}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(member\_casual, weekday) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{number\_of\_rides =} \FunctionTok{n}\NormalTok{()}\SpecialCharTok{/}\DecValTok{1000}
\NormalTok{            ,}\AttributeTok{average\_duration =} \FunctionTok{mean}\NormalTok{(ride\_length)) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{arrange}\NormalTok{(member\_casual, weekday)  }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ weekday, }\AttributeTok{y =}\NormalTok{ number\_of\_rides, }\AttributeTok{fill =}\NormalTok{ member\_casual)) }\SpecialCharTok{+}
  \FunctionTok{geom\_col}\NormalTok{(}\AttributeTok{position =} \StringTok{"dodge"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{scale\_fill\_manual}\NormalTok{(}\AttributeTok{values=}\NormalTok{cbPaletteMin) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{y =} \StringTok{"Number of rides in thousands"}\NormalTok{, }\AttributeTok{x =} \ConstantTok{NULL}\NormalTok{, }\AttributeTok{fill =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## `summarise()` has grouped output by 'member_casual'. You can override using the
## `.groups` argument.
\end{verbatim}

\includegraphics{20230314_ANALYZE_summary_files/figure-latex/unnamed-chunk-2-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# ggsave("weeklyOverview.png",width=3840,height = 2160,unit="px")}

\CommentTok{\# Let\textquotesingle{}s visualize the number of rides by rider type for rides that begin and end within }
\CommentTok{\# 10 meters of each other \textquotesingle{}round trips\textquotesingle{}}
\FunctionTok{filter}\NormalTok{(all\_trips\_v5,geodist }\SpecialCharTok{\textless{}=} \DecValTok{10}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{weekday =} \FunctionTok{wday}\NormalTok{(started\_at, }\AttributeTok{label =} \ConstantTok{TRUE}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(member\_casual, weekday) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{number\_of\_rides =} \FunctionTok{n}\NormalTok{()}
\NormalTok{            ,}\AttributeTok{average\_duration =} \FunctionTok{mean}\NormalTok{(ride\_length)) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{arrange}\NormalTok{(member\_casual, weekday)  }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ weekday, }\AttributeTok{y =}\NormalTok{ number\_of\_rides, }\AttributeTok{fill =}\NormalTok{ member\_casual)) }\SpecialCharTok{+}
  \FunctionTok{geom\_col}\NormalTok{(}\AttributeTok{position =} \StringTok{"dodge"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{scale\_fill\_manual}\NormalTok{(}\AttributeTok{values=}\NormalTok{cbPaletteMin) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{y =} \StringTok{"Number of rides"}\NormalTok{, }\AttributeTok{x =} \ConstantTok{NULL}\NormalTok{, }\AttributeTok{fill =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## `summarise()` has grouped output by 'member_casual'. You can override using the
## `.groups` argument.
\end{verbatim}

\includegraphics{20230314_ANALYZE_summary_files/figure-latex/unnamed-chunk-2-2.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# ggsave("weeklyOverview{-}roundTrips.png",width=3840,height = 2160,unit="px")}

\CommentTok{\# Let\textquotesingle{}s create a visualization for average duration}
\NormalTok{all\_trips\_v5 }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{weekday =} \FunctionTok{wday}\NormalTok{(started\_at, }\AttributeTok{label =} \ConstantTok{TRUE}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(member\_casual, weekday) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{number\_of\_rides =} \FunctionTok{n}\NormalTok{()}
\NormalTok{            ,}\AttributeTok{average\_duration =} \FunctionTok{mean}\NormalTok{(ride\_length }\SpecialCharTok{/} \DecValTok{60}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{arrange}\NormalTok{(member\_casual, weekday)  }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ weekday, }\AttributeTok{y =}\NormalTok{ average\_duration, }\AttributeTok{fill =}\NormalTok{ member\_casual)) }\SpecialCharTok{+}
  \FunctionTok{geom\_col}\NormalTok{(}\AttributeTok{position =} \StringTok{"dodge"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{scale\_fill\_manual}\NormalTok{(}\AttributeTok{values=}\NormalTok{cbPaletteMin) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{y =} \StringTok{"average trip duration in minutes"}\NormalTok{, }\AttributeTok{x =} \ConstantTok{NULL}\NormalTok{, }\AttributeTok{fill =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## `summarise()` has grouped output by 'member_casual'. You can override using the
## `.groups` argument.
\end{verbatim}

\includegraphics{20230314_ANALYZE_summary_files/figure-latex/unnamed-chunk-2-3.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# ggsave("weeklyOverview{-}duration.png",width=3840,height = 2160,unit="px")}

\CommentTok{\# Let\textquotesingle{}s create a visualization for average duration  for rides that begin and end within }
\CommentTok{\# 10 meters of each other \textquotesingle{}round trips\textquotesingle{}}
\FunctionTok{filter}\NormalTok{(all\_trips\_v5,geodist }\SpecialCharTok{\textless{}=} \DecValTok{10}\NormalTok{) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{mutate}\NormalTok{(}\AttributeTok{weekday =} \FunctionTok{wday}\NormalTok{(started\_at, }\AttributeTok{label =} \ConstantTok{TRUE}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(member\_casual, weekday) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{number\_of\_rides =} \FunctionTok{n}\NormalTok{()}
\NormalTok{            ,}\AttributeTok{average\_duration =} \FunctionTok{mean}\NormalTok{(ride\_length }\SpecialCharTok{/} \DecValTok{60}\NormalTok{)) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{arrange}\NormalTok{(member\_casual, weekday)  }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{ggplot}\NormalTok{(}\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ weekday, }\AttributeTok{y =}\NormalTok{ average\_duration, }\AttributeTok{fill =}\NormalTok{ member\_casual)) }\SpecialCharTok{+}
  \FunctionTok{geom\_col}\NormalTok{(}\AttributeTok{position =} \StringTok{"dodge"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{scale\_fill\_manual}\NormalTok{(}\AttributeTok{values=}\NormalTok{cbPaletteMin) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{y =} \StringTok{"average trip duration in minutes"}\NormalTok{, }\AttributeTok{x =} \ConstantTok{NULL}\NormalTok{, }\AttributeTok{fill =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## `summarise()` has grouped output by 'member_casual'. You can override using the
## `.groups` argument.
\end{verbatim}

\includegraphics{20230314_ANALYZE_summary_files/figure-latex/unnamed-chunk-2-4.pdf}
\fontsize{10}{12} \selectfont

\begin{itemize}
\tightlist
\item
  The pattern emerging seems to be the following:

  \begin{itemize}
  \tightlist
  \item
    Members take shorter rides
  \item
    Casual users take longer rides, especially on weekends
  \item
    Casual users take more round trips than members
  \end{itemize}
\end{itemize}

\fontsize{9}{11}
\selectfont

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Let\textquotesingle{}s create a visualization for number of rides by User type, over the whole timeframe. }
\CommentTok{\# Overlay average daily temperature in Fahrenheit. ( Has to be scaled to match the geom\_density plot)}
\NormalTok{all\_trips\_v5 }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{ggplot}\NormalTok{() }\SpecialCharTok{+}
  \FunctionTok{geom\_smooth}\NormalTok{(}\AttributeTok{data =}\NormalTok{ climate\_chicago\_202110\_202210, }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ date, }\AttributeTok{y =} \FunctionTok{as.double}\NormalTok{(avgtemp) }\SpecialCharTok{/} \DecValTok{20000}\NormalTok{),}\AttributeTok{method=}\NormalTok{loess,}\AttributeTok{color=}\StringTok{"\#D55E00"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{geom\_density}\NormalTok{( }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =}\NormalTok{ date,}\AttributeTok{fill =}\NormalTok{ member\_casual),}\AttributeTok{alpha =}\NormalTok{ .}\DecValTok{3}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{scale\_y\_continuous}\NormalTok{(}
    \AttributeTok{breaks=}\FunctionTok{c}\NormalTok{(}\FunctionTok{seq}\NormalTok{(}\FloatTok{0.000}\NormalTok{,}\FloatTok{0.005}\NormalTok{,}\AttributeTok{by=}\FloatTok{0.0005}\NormalTok{)), }
    \AttributeTok{labels=}\FunctionTok{c}\NormalTok{(}\FunctionTok{seq}\NormalTok{(}\DecValTok{0}\NormalTok{,}\DecValTok{100}\NormalTok{,}\DecValTok{10}\NormalTok{)),}
    \AttributeTok{sec.axis =} \FunctionTok{sec\_axis}\NormalTok{(}\SpecialCharTok{\textasciitilde{}}\NormalTok{ (((. }\SpecialCharTok{*} \DecValTok{20000}\NormalTok{) }\SpecialCharTok{{-}} \DecValTok{32}\NormalTok{) }\SpecialCharTok{*} \DecValTok{5}\SpecialCharTok{/}\DecValTok{9}\NormalTok{), }\AttributeTok{name =} \StringTok{"Average daily temperature in °C"}\NormalTok{,}\AttributeTok{breaks=}\FunctionTok{c}\NormalTok{(}\FunctionTok{seq}\NormalTok{(}\SpecialCharTok{{-}}\DecValTok{15}\NormalTok{,}\DecValTok{40}\NormalTok{,}\DecValTok{5}\NormalTok{)))}
\NormalTok{    ) }\SpecialCharTok{+}
  \FunctionTok{scale\_x\_date}\NormalTok{(}\AttributeTok{date\_breaks =} \StringTok{"1 month"}\NormalTok{) }\SpecialCharTok{+}
  \FunctionTok{theme}\NormalTok{(}\AttributeTok{axis.text.x =} \FunctionTok{element\_text}\NormalTok{(}\AttributeTok{angle =} \DecValTok{45}\NormalTok{, }\AttributeTok{vjust =} \FloatTok{0.9}\NormalTok{, }\AttributeTok{hjust=}\DecValTok{1}\NormalTok{)) }\SpecialCharTok{+}
  \FunctionTok{scale\_fill\_manual}\NormalTok{(}\AttributeTok{values=}\NormalTok{cbPaletteMin) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{y =} \StringTok{"Average daily temperature in °F"}\NormalTok{, }\AttributeTok{x =} \ConstantTok{NULL}\NormalTok{, }\AttributeTok{fill =} \ConstantTok{NULL}\NormalTok{) }
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## `geom_smooth()` using formula = 'y ~ x'
\end{verbatim}

\includegraphics{20230314_ANALYZE_summary_files/figure-latex/unnamed-chunk-3-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# ggsave("yearlyOverview.png",width=3840,height = 2160,unit="px")}
\end{Highlighting}
\end{Shaded}

\fontsize{10}{12}
\selectfont

\begin{itemize}
\tightlist
\item
  Looking at usage across the year, during the summer months, casual
  users overtake members
\item
  Usage, especially by casual users, seems to correlate with average
  temperature
\end{itemize}

\fontsize{9}{11}
\selectfont

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# Let\textquotesingle{}s create a visualization for number of rides by User type, only looking at time of day}
\NormalTok{all\_trips\_v5 }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{group\_by}\NormalTok{(member\_casual, hours) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{number\_of\_rides =} \FunctionTok{n}\NormalTok{()) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{arrange}\NormalTok{(member\_casual, }\FunctionTok{as.numeric}\NormalTok{(hours))  }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{ggplot}\NormalTok{( }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =} \FunctionTok{as.numeric}\NormalTok{(hours), }\AttributeTok{y =}\NormalTok{ number\_of\_rides }\SpecialCharTok{/} \DecValTok{1000}\NormalTok{, }\AttributeTok{fill =}\NormalTok{ member\_casual)) }\SpecialCharTok{+}
  \FunctionTok{geom\_col}\NormalTok{(}\AttributeTok{position =} \StringTok{"dodge"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{coord\_flip}\NormalTok{()  }\SpecialCharTok{+}
  \FunctionTok{scale\_x\_reverse}\NormalTok{(}\AttributeTok{breaks =}\NormalTok{ (}\DecValTok{0}\SpecialCharTok{:}\DecValTok{23}\NormalTok{)) }\SpecialCharTok{+}
  \FunctionTok{scale\_fill\_manual}\NormalTok{(}\AttributeTok{values=}\NormalTok{cbPaletteMin) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{y =} \StringTok{"number of rides in thousands"}\NormalTok{, }\AttributeTok{x =} \ConstantTok{NULL}\NormalTok{, }\AttributeTok{fill =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## `summarise()` has grouped output by 'member_casual'. You can override using the
## `.groups` argument.
\end{verbatim}

\includegraphics{20230314_ANALYZE_summary_files/figure-latex/unnamed-chunk-4-1.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{\# ggsave("dailyOverview.png",width=3840,height = 2160,unit="px")}

\NormalTok{all\_trips\_v5 }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(day\_of\_week }\SpecialCharTok{==} \StringTok{"Saturday"} \SpecialCharTok{|}\NormalTok{ day\_of\_week }\SpecialCharTok{==} \StringTok{"Sunday"}\NormalTok{ ) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(member\_casual, hours) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{number\_of\_rides =} \FunctionTok{n}\NormalTok{()) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{arrange}\NormalTok{(member\_casual, }\FunctionTok{as.numeric}\NormalTok{(hours))  }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{ggplot}\NormalTok{( }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =} \FunctionTok{as.numeric}\NormalTok{(hours), }\AttributeTok{y =}\NormalTok{ number\_of\_rides }\SpecialCharTok{/} \DecValTok{1000}\NormalTok{, }\AttributeTok{fill =}\NormalTok{ member\_casual)) }\SpecialCharTok{+}
  \FunctionTok{geom\_col}\NormalTok{(}\AttributeTok{position =} \StringTok{"dodge"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{coord\_flip}\NormalTok{()  }\SpecialCharTok{+}
  \FunctionTok{scale\_x\_reverse}\NormalTok{(}\AttributeTok{breaks =}\NormalTok{ (}\DecValTok{0}\SpecialCharTok{:}\DecValTok{23}\NormalTok{)) }\SpecialCharTok{+}
  \FunctionTok{scale\_fill\_manual}\NormalTok{(}\AttributeTok{values=}\NormalTok{cbPaletteMin) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{y =} \StringTok{"number of rides in thousands"}\NormalTok{, }\AttributeTok{x =} \ConstantTok{NULL}\NormalTok{, }\AttributeTok{fill =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## `summarise()` has grouped output by 'member_casual'. You can override using the
## `.groups` argument.
\end{verbatim}

\includegraphics{20230314_ANALYZE_summary_files/figure-latex/unnamed-chunk-4-2.pdf}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{all\_trips\_v5 }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{filter}\NormalTok{(day\_of\_week }\SpecialCharTok{!=} \StringTok{"Saturday"} \SpecialCharTok{|}\NormalTok{ day\_of\_week }\SpecialCharTok{!=} \StringTok{"Sunday"}\NormalTok{ ) }\SpecialCharTok{\%\textgreater{}\%}
  \FunctionTok{group\_by}\NormalTok{(member\_casual, hours) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{summarise}\NormalTok{(}\AttributeTok{number\_of\_rides =} \FunctionTok{n}\NormalTok{()) }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{arrange}\NormalTok{(member\_casual, }\FunctionTok{as.numeric}\NormalTok{(hours))  }\SpecialCharTok{\%\textgreater{}\%} 
  \FunctionTok{ggplot}\NormalTok{( }\FunctionTok{aes}\NormalTok{(}\AttributeTok{x =} \FunctionTok{as.numeric}\NormalTok{(hours), }\AttributeTok{y =}\NormalTok{ number\_of\_rides }\SpecialCharTok{/} \DecValTok{1000}\NormalTok{, }\AttributeTok{fill =}\NormalTok{ member\_casual)) }\SpecialCharTok{+}
  \FunctionTok{geom\_col}\NormalTok{(}\AttributeTok{position =} \StringTok{"dodge"}\NormalTok{) }\SpecialCharTok{+} 
  \FunctionTok{coord\_flip}\NormalTok{()  }\SpecialCharTok{+}
  \FunctionTok{scale\_x\_reverse}\NormalTok{(}\AttributeTok{breaks =}\NormalTok{ (}\DecValTok{0}\SpecialCharTok{:}\DecValTok{23}\NormalTok{)) }\SpecialCharTok{+}
  \FunctionTok{scale\_fill\_manual}\NormalTok{(}\AttributeTok{values=}\NormalTok{cbPaletteMin) }\SpecialCharTok{+}
  \FunctionTok{labs}\NormalTok{(}\AttributeTok{y =} \StringTok{"number of rides in thousands"}\NormalTok{, }\AttributeTok{x =} \ConstantTok{NULL}\NormalTok{, }\AttributeTok{fill =} \ConstantTok{NULL}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## `summarise()` has grouped output by 'member_casual'. You can override using the
## `.groups` argument.
\end{verbatim}

\includegraphics{20230314_ANALYZE_summary_files/figure-latex/unnamed-chunk-4-3.pdf}
\fontsize{10}{12} \selectfont

\begin{itemize}
\tightlist
\item
  Looking at usage over hours of the day, members are clustered around
  morning and afternoon, preceding the start of a typical workday and
  following the end of it, which seems to support the theory that
  members mainly use the service to commute
\end{itemize}

\end{document}
